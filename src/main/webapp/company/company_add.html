<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="stylesheet" href="../static/layui/css/layui.css" media="all">
	<link rel="stylesheet" href="../static/css/common.css" media="all">
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
</head>
<body>
	<div id="formArea">
		<input type="hidden" name="parentId" value="-1"/>
		<div class="layui-form-item">
			<label class="layui-form-label"><font color="red">*</font>公司名称</label>
			<div class="layui-input-block">
				<input type="text" name="name" lay-verify="title" autocomplete="off" placeholder="请输入公司名称" class="layui-input">
			</div>
		</div>
		<div class="layui-form-item">
			<label class="layui-form-label">联系人</label>
			<div class="layui-input-block">
				<input type="text" name="contact" lay-verify="title" autocomplete="off" placeholder="请输入联系人" class="layui-input">
			</div>
		</div>
		<div class="layui-form-item">
			<label class="layui-form-label">联系电话</label>
			<div class="layui-input-block">
				<input type="text" name="contactPhone" lay-verify="title" autocomplete="off" placeholder="请输入联系电话" class="layui-input">
			</div>
		</div>
	</div>
	
	

<script src="../static/layui/layui.js" charset="utf-8"></script>
<script src="../static/js/jquery-1.9.1.min.js" charset="utf-8"></script>
<script src="../static/js/common.js" charset="utf-8"></script>

<script>
layui.use(['layer'], function(){
	var layer = layui.layer;

    app.getOkBtn().click(function(){
        if( !checkForm() ){
            return;
		}
        app.request({
            url:'company/insert',
            success:function(resp){
                if( resp.result==0 ){
					app.alert(parent.layer,'操作成功');
                    parent.layui.table.reload('table',{});
                }else{
                    app.alert(parent.layer,'操作失败【'+resp.data+'】',2);
				}
                var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
                parent.layer.close(index); //再执行关闭
            }
        });
	});

});

function checkForm(){

    var checkOptions = [{
        type:'input',
		name:'name',
        verify:['required']
	}];

	return app.checkForm(checkOptions);
}

</script>

</body>
</html>